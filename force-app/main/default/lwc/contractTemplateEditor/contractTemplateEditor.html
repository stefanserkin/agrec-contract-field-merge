<template>
    <lightning-card title="Waiver Text Editor" icon-name="custom:custom18">

        <lightning-spinner
            lwc:if={isLoading}
            size="medium"
            alternative-text="Loading..."
        ></lightning-spinner>

        <div slot="actions">
            <lightning-button-group>
                <lightning-button 
                    label="Insert Merge Field" 
                    icon-name="utility:insert_tag_field" 
                    icon-position="left" 
                    onclick={openMergeFieldWizard}
                ></lightning-button>
                <lightning-button 
                    label="Preview" 
                    icon-name="utility:preview" 
                    icon-position="left" 
                    onclick={openPreviewModal}
                ></lightning-button>
                <lightning-button 
                    label="Save" 
                    icon-name="utility:save" 
                    icon-position="left" 
                    onclick={handleSave}
                    disabled={saveIsDisabled}
                ></lightning-button>
            </lightning-button-group>
        </div>

        <div class="slds-p-around_medium">
            <lightning-input-rich-text
                value={templateBody}
                onchange={handleEditorChange}
                label="Waiver Template Content"
                class="editor"
            ></lightning-input-rich-text>

            <template lwc:if={previewContent}>
                <div class="slds-box slds-m-top_medium">
                    <h3 class="slds-text-heading_small">Preview</h3>
                    <div>
                        <lightning-formatted-rich-text 
                            value={previewContent}
                        ></lightning-formatted-rich-text>
                    </div>
                </div>
            </template>
        </div>
    </lightning-card>
</template>